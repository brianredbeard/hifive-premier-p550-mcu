From d2068ca86fe6763e5d20d5fd3b999c553dccda86 Mon Sep 17 00:00:00 2001
From: yuan junhui <yuanjunhui@eswincomputing.com>
Date: Mon, 20 May 2024 16:07:30 +0800
Subject: [PATCH 042/109] WIN2030-15099:refactor(fix):dipswitch ajax

Changelogs:
01,dipswitch label,ajax

Change-Id: I21bc89acf5f76ba395dc39f9c6274151a1f8e7a6
---
 Core/Src/web-server.c | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/Core/Src/web-server.c b/Core/Src/web-server.c
index bfb2a87..a72051c 100644
--- a/Core/Src/web-server.c
+++ b/Core/Src/web-server.c
@@ -9266,6 +9266,10 @@ const unsigned char info_html[] ="<html lang=\"en\"> \
 														$('#pvt-info-refresh-hid').click(); \n \
 														$('#pvt-info-refresh-hid').val(\"0\"); \n \
                                                     }); \n \
+													var $dipRadios = $('.network-roww.option-row input[type=\"radio\"]');\n \
+													function toggleDipRadios(isEnabled) {\n \
+														$dipRadios.prop('disabled', !isEnabled);\n \
+													}\n \
 													$('#dip-switch-refresh-hid').click(function() {\n \
                                                         $.ajax({\n \
 															async: false,\n \
@@ -9532,6 +9536,9 @@ const unsigned char info_html[] ="<html lang=\"en\"> \
 														$('#soc-refresh-hid').click(); \n \
 														$('#soc-refresh-hid').val(\"0\"); \n \
                                                     }); \n \
+													$('input[name=\"swctrl\"]').change(function() {\n \
+														toggleDipRadios($(this).val() === '1');\n \
+													});\n \
 													// --------------------after load page ------------- \n \
 													$('#power-on-refresh-hid').click(); \n \
 													$('#power-lostresume-refresh-hid').click(); \n \
@@ -9686,6 +9693,7 @@ const unsigned char info_html[] ="<html lang=\"en\"> \
                                         </div> \
 										 <div class=\"dip-switch\" > \
                                             <h3>DIP Switch</h3> \
+											<label>Software config:</label> \
 											<div class=\"network-roww label-row\">\
 												<label>dip0</label>\
 												<label>dip1</label>\
-- 
2.25.1

